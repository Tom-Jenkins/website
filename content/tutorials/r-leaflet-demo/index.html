---
title: "An introduction to Leaflet for R"
date: '2021-11-24'
diagram: yes
math: yes
slug: r-leaflet-introduction
summary: This tutorial covers how to develop interactive maps using R and Leaflet.
categories: ["R","Leaflet"]
weight: 1
image:
  placement: 1
  caption: ''
---

<script src="{{< blogdown/postref >}}index_files/header-attrs/header-attrs.js"></script>
<script src="{{< blogdown/postref >}}index_files/htmlwidgets/htmlwidgets.js"></script>
<script src="{{< blogdown/postref >}}index_files/jquery/jquery.min.js"></script>
<link href="{{< blogdown/postref >}}index_files/leaflet/leaflet.css" rel="stylesheet" />
<script src="{{< blogdown/postref >}}index_files/leaflet/leaflet.js"></script>
<link href="{{< blogdown/postref >}}index_files/leafletfix/leafletfix.css" rel="stylesheet" />
<script src="{{< blogdown/postref >}}index_files/proj4/proj4.min.js"></script>
<script src="{{< blogdown/postref >}}index_files/Proj4Leaflet/proj4leaflet.js"></script>
<link href="{{< blogdown/postref >}}index_files/rstudio_leaflet/rstudio_leaflet.css" rel="stylesheet" />
<script src="{{< blogdown/postref >}}index_files/leaflet-binding/leaflet.js"></script>
<script src="{{< blogdown/postref >}}index_files/leaflet-providers/leaflet-providers_1.9.0.js"></script>
<script src="{{< blogdown/postref >}}index_files/leaflet-providers-plugin/leaflet-providers-plugin.js"></script>
<script src="{{< blogdown/postref >}}index_files/popup/popup.js"></script>
<link id="image-Circle point 1-file30b46d134f92-attachment" rel="attachment" href="index_files/image-Circle point 1/file30b46d134f92.png"/>

<link href="{{< blogdown/postref >}}index_files/leaflet-easybutton/easy-button.css" rel="stylesheet" />
<script src="{{< blogdown/postref >}}index_files/leaflet-easybutton/easy-button.js"></script>
<script src="{{< blogdown/postref >}}index_files/leaflet-easybutton/EasyButton-binding.js"></script>
<link href="{{< blogdown/postref >}}index_files/ionicons/ionicons.min.css" rel="stylesheet" />
<link href="{{< blogdown/postref >}}index_files/leaflet-minimap/Control.MiniMap.min.css" rel="stylesheet" />
<script src="{{< blogdown/postref >}}index_files/leaflet-minimap/Control.MiniMap.min.js"></script>
<script src="{{< blogdown/postref >}}index_files/leaflet-minimap/Minimap-binding.js"></script>
<link href="{{< blogdown/postref >}}index_files/leaflet-measure/leaflet-measure.css" rel="stylesheet" />
<script src="{{< blogdown/postref >}}index_files/leaflet-measure/leaflet-measure.min.js"></script>


<style type="text/css">
pre {
  max-height: 300px;
  overflow-y: auto;
}
</style>
<div id="contents"/>
<div id="contents" class="section level2">
<h2>Contents</h2>
<ol style="list-style-type: decimal">
<li><a href="#1">My first Leaflet map</a></li>
<li><a href="#2">Add point data</a></li>
<li><a href="#3">Add polygon data</a></li>
<li><a href="#4">Add popup graphs and images</a></li>
<li><a href="#5">Add extra customisation and widgets</a></li>
<li><a href="#6">Final map</a></li>
<li><a href="#7">Further resources and R session info</a></li>
</ol>
<div id="1"/>
<div id="my-first-leaflet-map" class="section level3">
<h3>1. My first Leaflet map</h3>
<p><a href="https://leafletjs.com/">Leaflet</a> is an open-source JavaScript library for creating interactive maps. It supports vector and raster GIS data and has lots of plugins, widgets and customisation options. R users can access most of the features of Leaflet though the <a href="https://github.com/rstudio/leaflet">RStudio package leaflet</a>. In this tutorial, we will cover some of the basics of Leaflet for R and introduce adding and customising features, layers and interactive widgets to your Leaflet map.</p>
<div id="install-and-load-r-packages" class="section level4">
<h4>Install and load R packages</h4>
<pre class="r"><code>library(leaflet)
library(leafpop)
library(leaflet.extras)
library(htmltools)
library(sf)
library(tidyverse)
library(rnaturalearth)
library(lattice)
library(htmlwidgets)</code></pre>
</div>
<div id="create-a-map-centred-on-the-centre-point-of-the-uk.-add-multiple-basemaps-and-a-layers-control-switch" class="section level4">
<h4>Create a map centred on the centre point of the UK. Add multiple basemaps and a layers control switch</h4>
<pre class="r"><code># Coordinates of the centre point of the UK: Whitendale Hanging Stones
whitendale = c(-2.547855, 54.00366)

l1 = leaflet() %&gt;%
  # Centre map on Whitendale Hanging Stones
  setView(lng = whitendale[1], lat = whitendale[2], zoom = 6) %&gt;% 
  # Add OSM basemap
  addProviderTiles(providers$OpenStreetMap, group = &quot;Open Street Map&quot;) %&gt;% 
  # Add additional basemap layers
  addProviderTiles(providers$Esri.WorldImagery, group = &quot;ESRI World Imagery&quot;) %&gt;% 
  addProviderTiles(providers$Esri.OceanBasemap, group = &quot;ESRI Ocean Basemap&quot;) %&gt;% 
  # Add a User-Interface (UI) control to switch layers
  addLayersControl(
    baseGroups = c(&quot;Open Street Map&quot;,&quot;ESRI World Imagery&quot;,&quot;ESRI Ocean Basemap&quot;),
    options = layersControlOptions(collapsed = FALSE)
    )
l1</code></pre>
<div id="htmlwidget-1" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[54.00366,-2.547855],6,[]],"calls":[{"method":"addProviderTiles","args":["OpenStreetMap",null,"Open Street Map",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["Esri.WorldImagery",null,"ESRI World Imagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["Esri.OceanBasemap",null,"ESRI Ocean Basemap",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addLayersControl","args":[["Open Street Map","ESRI World Imagery","ESRI Ocean Basemap"],[],{"collapsed":false,"autoZIndex":true,"position":"topright"}]}]},"evals":[],"jsHooks":[]}</script>
<p><a href="#contents">Back to Contents</a></p>
<div id="2"/>
</div>
</div>
<div id="add-point-data" class="section level3">
<h3>2. Add point data</h3>
<p>Here, we download a boundary outline of the United Kingdom from the <code>rnaturalearth</code> package as an <code>sf</code> object. R Leaflet requires all spatial data to be supplied in longitude and latitude using WGS 84 (EPSG:4326). Then, we sample points randomly within the UK polygon and add these points to the map created in Step 1.</p>
<div id="download-a-polygon-outline-of-the-uk-and-sample-100-random-points" class="section level4">
<h4>Download a polygon outline of the UK and sample 100 random points</h4>
<pre class="r"><code># UK boundary outline
uk_outline = ne_countries(country = &quot;United Kingdom&quot;, scale = &quot;medium&quot;, returnclass = &quot;sf&quot;) %&gt;% 
  # Keep only geometry
  st_geometry() %&gt;% 
  # Transform coordinate reference system (CRS) to WGS84
  st_transform(crs = 4326)
plot(uk_outline)

# Sample 100 random points within the UK polygon
set.seed(1234)
uk_pts = st_sample(uk_outline, size = 100)
plot(uk_pts, pch = 21, col = &quot;black&quot;, bg = &quot;yellow&quot;, add = TRUE)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
</div>
<div id="add-points-to-the-map-as-markers" class="section level4">
<h4>Add points to the map as markers</h4>
<p>This code adds the point data to the map as markers and a label for each marker appears on mouse hover.</p>
<pre class="r"><code>l1 %&gt;%
  # Add point data with a label
  addMarkers(
    data = uk_pts,
     # Label appears on mouse hover
     label = paste(&quot;Label&quot;, seq(1:100)),
     # Options to customise the label text and size
     labelOptions = labelOptions(
       textsize = &quot;14px&quot;, # text size
       style = list(
        &quot;font-weight&quot; = &quot;bold&quot;, # bold text
        padding = &quot;5px&quot; # padding around text
        )
       )
    )</code></pre>
<div id="htmlwidget-2" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[54.00366,-2.547855],6,[]],"calls":[{"method":"addProviderTiles","args":["OpenStreetMap",null,"Open Street Map",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["Esri.WorldImagery",null,"ESRI World Imagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["Esri.OceanBasemap",null,"ESRI Ocean Basemap",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addLayersControl","args":[["Open Street Map","ESRI World Imagery","ESRI Ocean Basemap"],[],{"collapsed":false,"autoZIndex":true,"position":"topright"}]},{"method":"addMarkers","args":[[54.0822213590915,51.4350432439315,51.9348226725412,51.8905509754304,54.0908065111777,51.9520361437869,53.9736948927934,51.8323041092126,56.7861881096018,57.6445483649753,51.9172792791196,54.7668605167992,55.2435418518087,53.0797272943651,51.2827414215399,57.6148195170986,54.9170350175274,54.6358216176692,52.3030048180656,58.6344943072293,52.6200692826876,50.9922596124837,56.783366253141,52.0274996874921,51.0608322348177,51.132141634211,51.9011015282938,57.1648481899148,56.7256478247995,55.7556989116873,50.9133186390096,56.3895317287263,58.1356593534958,52.1263349958649,54.1797138477309,58.1174058233694,56.8312920234779,53.4284680295092,54.4188248335032,52.6917061387243,57.6629448783138,58.5810121531866,55.0778283184237,55.6541965341256,56.479057353835,52.5151374220652,57.8400512729566,57.0385037106853,51.8944827250834,52.8645062833447,54.7089761852633,57.5296021006356,53.7149684489867,51.3375688066497,50.7310070473573,57.9620495147011,57.989577430239,51.5429943572853,57.9831821368439,56.9083059095346,51.2567310865777,50.8705068231669,56.7777537394749,53.3010695373514,52.4454645930263,53.625275912673,52.3582538465184,52.4932433109579,56.7592960913905,55.2116076515274,56.2674466688329,52.1258901586594,52.5431880850765,58.2998991538662,60.4808974335756,57.0427650053984,51.9543282297121,54.0335957978457,55.8438966402224,52.990192008658,50.3915680686841,53.5710035861523,56.3199035065895,56.1017911132985,57.2231867229847,56.4209435046735,52.7803736355851,51.712042860798,51.6728749072439,55.7115161631774,52.0554256306723,52.5499719635619,56.8624220567372,50.5669013997214,55.1871341840416,57.1098548072591,54.5290432472357,51.6743594585018,55.1517786853086,52.9935435567256],[-1.9894079965932,-2.11824031797076,-1.97872491322795,0.370839586885456,-1.81125189564899,-1.55631916955789,-1.28423098025831,0.137206990658166,-5.31367343189574,-6.29787325010708,-5.1507611196808,-6.57163559166198,-3.63343807891849,-3.12684587344118,-2.67157688098449,-3.17936327731639,-1.44740717969852,-7.41503745190927,-3.1602133643946,-3.25885605724141,0.246969772295603,-1.15659894583586,-3.11457364928954,-2.5604345750611,0.686583147239439,-0.398655239563041,-3.00930519760512,-4.97319997695901,-3.4769734535397,-6.20438104134916,-3.08454318724869,-5.17543342027727,-5.08197568085686,-2.55542683230577,-6.12503549825757,-4.92337199667997,-3.83680957231225,-1.08926868098041,-0.782875921605945,1.69315107823404,-5.65668349797776,-3.22912990737948,-1.87268976463145,-3.96029454032994,-3.51770020908277,-1.89599938064237,-4.93619023982626,-3.38334904438214,0.265491542743991,-2.65384119198841,-1.84104823012111,-3.88146619851266,-2.36555728034307,-1.13340568082384,-3.92143345408892,-4.74640704660066,-3.95056916886458,-2.59686053053954,-5.14751251531649,-5.07755685549598,0.111558913253436,-0.901328783193447,-5.10157738921441,-4.14698239533752,1.60447307082795,-2.54321445679942,-1.21343974242626,-3.40464009803434,-3.20360798033433,-4.80990452240855,-3.25413153788811,-2.53680345711144,-3.30279842865473,-3.94978804351665,-1.32848300686272,-2.88353491504347,0.209801075944966,-2.21226192941611,-4.61124135812003,-0.637660375004079,-4.42608730226855,-0.237013783518152,-2.75641561633473,-3.898917466535,-5.3675881324814,-3.62616645354644,-1.25752640050122,-0.0263902404434635,-1.66443448175849,-4.05468146871678,-0.647618321801009,-1.85476360646388,-3.66912737120108,-4.81523820732998,-3.35692948899066,-2.21935880604813,-2.13714463196882,-3.78708188866237,-2.60504693716937,-3.10367962518592],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,["Label 1","Label 2","Label 3","Label 4","Label 5","Label 6","Label 7","Label 8","Label 9","Label 10","Label 11","Label 12","Label 13","Label 14","Label 15","Label 16","Label 17","Label 18","Label 19","Label 20","Label 21","Label 22","Label 23","Label 24","Label 25","Label 26","Label 27","Label 28","Label 29","Label 30","Label 31","Label 32","Label 33","Label 34","Label 35","Label 36","Label 37","Label 38","Label 39","Label 40","Label 41","Label 42","Label 43","Label 44","Label 45","Label 46","Label 47","Label 48","Label 49","Label 50","Label 51","Label 52","Label 53","Label 54","Label 55","Label 56","Label 57","Label 58","Label 59","Label 60","Label 61","Label 62","Label 63","Label 64","Label 65","Label 66","Label 67","Label 68","Label 69","Label 70","Label 71","Label 72","Label 73","Label 74","Label 75","Label 76","Label 77","Label 78","Label 79","Label 80","Label 81","Label 82","Label 83","Label 84","Label 85","Label 86","Label 87","Label 88","Label 89","Label 90","Label 91","Label 92","Label 93","Label 94","Label 95","Label 96","Label 97","Label 98","Label 99","Label 100"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"14px","textOnly":false,"style":{"font-weight":"bold","padding":"5px"},"className":"","sticky":true},null]}],"limits":{"lat":[50.3915680686841,60.4808974335756],"lng":[-7.41503745190927,1.69315107823404]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="add-tree-icons-instead-of-markers-to-represent-the-points" class="section level4">
<h4>Add tree icons instead of markers to represent the points</h4>
<pre class="r"><code># Link to icon
tree_icon = &quot;https://cdn-icons-png.flaticon.com/512/490/490091.png&quot;

l2 = l1 %&gt;%
  # Add point data with a label
  addMarkers(
    data = uk_pts,
    group = &quot;Tree icons&quot;,
    # Label appears on mouse hover
    label = paste(&quot;Label&quot;, seq(1:100)),
    # Options to customise the label text and size
    labelOptions = labelOptions(
      textsize = &quot;14px&quot;, # text size
      style = list(
        &quot;font-weight&quot; = &quot;bold&quot;, # bold text
        padding = &quot;5px&quot; # padding around text
      )
    ),
    # Change markers to custom icons
    icon = list(
      iconUrl = tree_icon,
      iconSize = c(20, 20)
      )
    )
l2</code></pre>
<div id="htmlwidget-3" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-3">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[54.00366,-2.547855],6,[]],"calls":[{"method":"addProviderTiles","args":["OpenStreetMap",null,"Open Street Map",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["Esri.WorldImagery",null,"ESRI World Imagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["Esri.OceanBasemap",null,"ESRI Ocean Basemap",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addLayersControl","args":[["Open Street Map","ESRI World Imagery","ESRI Ocean Basemap"],[],{"collapsed":false,"autoZIndex":true,"position":"topright"}]},{"method":"addMarkers","args":[[54.0822213590915,51.4350432439315,51.9348226725412,51.8905509754304,54.0908065111777,51.9520361437869,53.9736948927934,51.8323041092126,56.7861881096018,57.6445483649753,51.9172792791196,54.7668605167992,55.2435418518087,53.0797272943651,51.2827414215399,57.6148195170986,54.9170350175274,54.6358216176692,52.3030048180656,58.6344943072293,52.6200692826876,50.9922596124837,56.783366253141,52.0274996874921,51.0608322348177,51.132141634211,51.9011015282938,57.1648481899148,56.7256478247995,55.7556989116873,50.9133186390096,56.3895317287263,58.1356593534958,52.1263349958649,54.1797138477309,58.1174058233694,56.8312920234779,53.4284680295092,54.4188248335032,52.6917061387243,57.6629448783138,58.5810121531866,55.0778283184237,55.6541965341256,56.479057353835,52.5151374220652,57.8400512729566,57.0385037106853,51.8944827250834,52.8645062833447,54.7089761852633,57.5296021006356,53.7149684489867,51.3375688066497,50.7310070473573,57.9620495147011,57.989577430239,51.5429943572853,57.9831821368439,56.9083059095346,51.2567310865777,50.8705068231669,56.7777537394749,53.3010695373514,52.4454645930263,53.625275912673,52.3582538465184,52.4932433109579,56.7592960913905,55.2116076515274,56.2674466688329,52.1258901586594,52.5431880850765,58.2998991538662,60.4808974335756,57.0427650053984,51.9543282297121,54.0335957978457,55.8438966402224,52.990192008658,50.3915680686841,53.5710035861523,56.3199035065895,56.1017911132985,57.2231867229847,56.4209435046735,52.7803736355851,51.712042860798,51.6728749072439,55.7115161631774,52.0554256306723,52.5499719635619,56.8624220567372,50.5669013997214,55.1871341840416,57.1098548072591,54.5290432472357,51.6743594585018,55.1517786853086,52.9935435567256],[-1.9894079965932,-2.11824031797076,-1.97872491322795,0.370839586885456,-1.81125189564899,-1.55631916955789,-1.28423098025831,0.137206990658166,-5.31367343189574,-6.29787325010708,-5.1507611196808,-6.57163559166198,-3.63343807891849,-3.12684587344118,-2.67157688098449,-3.17936327731639,-1.44740717969852,-7.41503745190927,-3.1602133643946,-3.25885605724141,0.246969772295603,-1.15659894583586,-3.11457364928954,-2.5604345750611,0.686583147239439,-0.398655239563041,-3.00930519760512,-4.97319997695901,-3.4769734535397,-6.20438104134916,-3.08454318724869,-5.17543342027727,-5.08197568085686,-2.55542683230577,-6.12503549825757,-4.92337199667997,-3.83680957231225,-1.08926868098041,-0.782875921605945,1.69315107823404,-5.65668349797776,-3.22912990737948,-1.87268976463145,-3.96029454032994,-3.51770020908277,-1.89599938064237,-4.93619023982626,-3.38334904438214,0.265491542743991,-2.65384119198841,-1.84104823012111,-3.88146619851266,-2.36555728034307,-1.13340568082384,-3.92143345408892,-4.74640704660066,-3.95056916886458,-2.59686053053954,-5.14751251531649,-5.07755685549598,0.111558913253436,-0.901328783193447,-5.10157738921441,-4.14698239533752,1.60447307082795,-2.54321445679942,-1.21343974242626,-3.40464009803434,-3.20360798033433,-4.80990452240855,-3.25413153788811,-2.53680345711144,-3.30279842865473,-3.94978804351665,-1.32848300686272,-2.88353491504347,0.209801075944966,-2.21226192941611,-4.61124135812003,-0.637660375004079,-4.42608730226855,-0.237013783518152,-2.75641561633473,-3.898917466535,-5.3675881324814,-3.62616645354644,-1.25752640050122,-0.0263902404434635,-1.66443448175849,-4.05468146871678,-0.647618321801009,-1.85476360646388,-3.66912737120108,-4.81523820732998,-3.35692948899066,-2.21935880604813,-2.13714463196882,-3.78708188866237,-2.60504693716937,-3.10367962518592],{"iconUrl":{"data":"https://cdn-icons-png.flaticon.com/512/490/490091.png","index":0},"iconSize":[[20,20]]},null,"Tree icons",{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,["Label 1","Label 2","Label 3","Label 4","Label 5","Label 6","Label 7","Label 8","Label 9","Label 10","Label 11","Label 12","Label 13","Label 14","Label 15","Label 16","Label 17","Label 18","Label 19","Label 20","Label 21","Label 22","Label 23","Label 24","Label 25","Label 26","Label 27","Label 28","Label 29","Label 30","Label 31","Label 32","Label 33","Label 34","Label 35","Label 36","Label 37","Label 38","Label 39","Label 40","Label 41","Label 42","Label 43","Label 44","Label 45","Label 46","Label 47","Label 48","Label 49","Label 50","Label 51","Label 52","Label 53","Label 54","Label 55","Label 56","Label 57","Label 58","Label 59","Label 60","Label 61","Label 62","Label 63","Label 64","Label 65","Label 66","Label 67","Label 68","Label 69","Label 70","Label 71","Label 72","Label 73","Label 74","Label 75","Label 76","Label 77","Label 78","Label 79","Label 80","Label 81","Label 82","Label 83","Label 84","Label 85","Label 86","Label 87","Label 88","Label 89","Label 90","Label 91","Label 92","Label 93","Label 94","Label 95","Label 96","Label 97","Label 98","Label 99","Label 100"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"14px","textOnly":false,"style":{"font-weight":"bold","padding":"5px"},"className":"","sticky":true},null]}],"limits":{"lat":[50.3915680686841,60.4808974335756],"lng":[-7.41503745190927,1.69315107823404]}},"evals":[],"jsHooks":[]}</script>
<p><a href="#contents">Back to Contents</a></p>
<div id="3"/>
</div>
</div>
<div id="add-polygon-data" class="section level3">
<h3>3. Add polygon data</h3>
<div id="create-a-polygon-using-a-bounding-box-of-four-coordinates" class="section level4">
<h4>Create a polygon using a bounding box of four coordinates</h4>
<pre class="r"><code># Boundary box
poly_df = data.frame(lon = c(-1.5,-0.9), lat = c(52.0,52.2))

# Convert to a polygon sf object
poly1 = st_as_sf(poly_df, coords = c(&quot;lon&quot;,&quot;lat&quot;), crs = 4326) %&gt;%
  st_bbox %&gt;% 
  st_as_sfc %&gt;% 
  st_as_sf
# plot(poly1)</code></pre>
</div>
<div id="add-polygon-to-the-map" class="section level4">
<h4>Add polygon to the map</h4>
<p>This code creates a blue polygon, the border of which is highlighted white on mouse hover and a popup label appears on mouse click.</p>
<pre class="r"><code>l3 = l2 %&gt;%
  # Add polygon to map
  addPolygons(
    data = poly1,
    group = &quot;Polygon 1&quot;,
    # stroke parameters
    weight = 3, color = &quot;blue&quot;,
    # fill parameters
    fillColor = &quot;blue&quot;, fillOpacity = 0.1,
    # Popup label
    popup = &quot;Polygon 1&quot;,
    # Options to customise polygon highlighting
    highlightOptions = highlightOptions(
      # Highlight stroke parameters
      weight = 3, color = &quot;white&quot;,
      # Highlight fill parameters
      fillColor = &quot;blue&quot;, fillOpacity = 0.1
      )
    )
l3</code></pre>
<div id="htmlwidget-4" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-4">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[54.00366,-2.547855],6,[]],"calls":[{"method":"addProviderTiles","args":["OpenStreetMap",null,"Open Street Map",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["Esri.WorldImagery",null,"ESRI World Imagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["Esri.OceanBasemap",null,"ESRI Ocean Basemap",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addLayersControl","args":[["Open Street Map","ESRI World Imagery","ESRI Ocean Basemap"],[],{"collapsed":false,"autoZIndex":true,"position":"topright"}]},{"method":"addMarkers","args":[[54.0822213590915,51.4350432439315,51.9348226725412,51.8905509754304,54.0908065111777,51.9520361437869,53.9736948927934,51.8323041092126,56.7861881096018,57.6445483649753,51.9172792791196,54.7668605167992,55.2435418518087,53.0797272943651,51.2827414215399,57.6148195170986,54.9170350175274,54.6358216176692,52.3030048180656,58.6344943072293,52.6200692826876,50.9922596124837,56.783366253141,52.0274996874921,51.0608322348177,51.132141634211,51.9011015282938,57.1648481899148,56.7256478247995,55.7556989116873,50.9133186390096,56.3895317287263,58.1356593534958,52.1263349958649,54.1797138477309,58.1174058233694,56.8312920234779,53.4284680295092,54.4188248335032,52.6917061387243,57.6629448783138,58.5810121531866,55.0778283184237,55.6541965341256,56.479057353835,52.5151374220652,57.8400512729566,57.0385037106853,51.8944827250834,52.8645062833447,54.7089761852633,57.5296021006356,53.7149684489867,51.3375688066497,50.7310070473573,57.9620495147011,57.989577430239,51.5429943572853,57.9831821368439,56.9083059095346,51.2567310865777,50.8705068231669,56.7777537394749,53.3010695373514,52.4454645930263,53.625275912673,52.3582538465184,52.4932433109579,56.7592960913905,55.2116076515274,56.2674466688329,52.1258901586594,52.5431880850765,58.2998991538662,60.4808974335756,57.0427650053984,51.9543282297121,54.0335957978457,55.8438966402224,52.990192008658,50.3915680686841,53.5710035861523,56.3199035065895,56.1017911132985,57.2231867229847,56.4209435046735,52.7803736355851,51.712042860798,51.6728749072439,55.7115161631774,52.0554256306723,52.5499719635619,56.8624220567372,50.5669013997214,55.1871341840416,57.1098548072591,54.5290432472357,51.6743594585018,55.1517786853086,52.9935435567256],[-1.9894079965932,-2.11824031797076,-1.97872491322795,0.370839586885456,-1.81125189564899,-1.55631916955789,-1.28423098025831,0.137206990658166,-5.31367343189574,-6.29787325010708,-5.1507611196808,-6.57163559166198,-3.63343807891849,-3.12684587344118,-2.67157688098449,-3.17936327731639,-1.44740717969852,-7.41503745190927,-3.1602133643946,-3.25885605724141,0.246969772295603,-1.15659894583586,-3.11457364928954,-2.5604345750611,0.686583147239439,-0.398655239563041,-3.00930519760512,-4.97319997695901,-3.4769734535397,-6.20438104134916,-3.08454318724869,-5.17543342027727,-5.08197568085686,-2.55542683230577,-6.12503549825757,-4.92337199667997,-3.83680957231225,-1.08926868098041,-0.782875921605945,1.69315107823404,-5.65668349797776,-3.22912990737948,-1.87268976463145,-3.96029454032994,-3.51770020908277,-1.89599938064237,-4.93619023982626,-3.38334904438214,0.265491542743991,-2.65384119198841,-1.84104823012111,-3.88146619851266,-2.36555728034307,-1.13340568082384,-3.92143345408892,-4.74640704660066,-3.95056916886458,-2.59686053053954,-5.14751251531649,-5.07755685549598,0.111558913253436,-0.901328783193447,-5.10157738921441,-4.14698239533752,1.60447307082795,-2.54321445679942,-1.21343974242626,-3.40464009803434,-3.20360798033433,-4.80990452240855,-3.25413153788811,-2.53680345711144,-3.30279842865473,-3.94978804351665,-1.32848300686272,-2.88353491504347,0.209801075944966,-2.21226192941611,-4.61124135812003,-0.637660375004079,-4.42608730226855,-0.237013783518152,-2.75641561633473,-3.898917466535,-5.3675881324814,-3.62616645354644,-1.25752640050122,-0.0263902404434635,-1.66443448175849,-4.05468146871678,-0.647618321801009,-1.85476360646388,-3.66912737120108,-4.81523820732998,-3.35692948899066,-2.21935880604813,-2.13714463196882,-3.78708188866237,-2.60504693716937,-3.10367962518592],{"iconUrl":{"data":"https://cdn-icons-png.flaticon.com/512/490/490091.png","index":0},"iconSize":[[20,20]]},null,"Tree icons",{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,["Label 1","Label 2","Label 3","Label 4","Label 5","Label 6","Label 7","Label 8","Label 9","Label 10","Label 11","Label 12","Label 13","Label 14","Label 15","Label 16","Label 17","Label 18","Label 19","Label 20","Label 21","Label 22","Label 23","Label 24","Label 25","Label 26","Label 27","Label 28","Label 29","Label 30","Label 31","Label 32","Label 33","Label 34","Label 35","Label 36","Label 37","Label 38","Label 39","Label 40","Label 41","Label 42","Label 43","Label 44","Label 45","Label 46","Label 47","Label 48","Label 49","Label 50","Label 51","Label 52","Label 53","Label 54","Label 55","Label 56","Label 57","Label 58","Label 59","Label 60","Label 61","Label 62","Label 63","Label 64","Label 65","Label 66","Label 67","Label 68","Label 69","Label 70","Label 71","Label 72","Label 73","Label 74","Label 75","Label 76","Label 77","Label 78","Label 79","Label 80","Label 81","Label 82","Label 83","Label 84","Label 85","Label 86","Label 87","Label 88","Label 89","Label 90","Label 91","Label 92","Label 93","Label 94","Label 95","Label 96","Label 97","Label 98","Label 99","Label 100"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"14px","textOnly":false,"style":{"font-weight":"bold","padding":"5px"},"className":"","sticky":true},null]},{"method":"addPolygons","args":[[[[{"lng":[-1.5,-0.9,-0.9,-1.5,-1.5],"lat":[52,52,52.2,52.2,52]}]]],null,"Polygon 1",{"interactive":true,"className":"","stroke":true,"color":"blue","weight":3,"opacity":0.5,"fill":true,"fillColor":"blue","fillOpacity":0.1,"smoothFactor":1,"noClip":false},"Polygon 1",null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"color":"white","weight":3,"fillColor":"blue","fillOpacity":0.1}]}],"limits":{"lat":[50.3915680686841,60.4808974335756],"lng":[-7.41503745190927,1.69315107823404]}},"evals":[],"jsHooks":[]}</script>
<p><a href="#contents">Back to Contents</a></p>
<div id="4"/>
</div>
</div>
<div id="add-popup-graphs-and-images" class="section level3">
<h3>4. Add popup graphs and images</h3>
<div id="sample-two-additional-random-points-within-the-uk-boundary-outline" class="section level4">
<h4>Sample two additional random points within the UK boundary outline</h4>
<pre class="r"><code># Sample two random points and visualise on UK outline 
set.seed(1234)
uk_pts2 = st_sample(uk_outline, size = 2)
plot(uk_outline)
plot(uk_pts, pch = 21, col = &quot;black&quot;, bg = &quot;yellow&quot;, add = TRUE)
plot(uk_pts2, pch = 21, col = &quot;black&quot;, bg = &quot;red&quot;, add = TRUE)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>
<div id="prepare-graph-and-image-examples-to-popup-on-click" class="section level4">
<h4>Prepare graph and image examples to popup on click</h4>
<pre class="r"><code># Example graph to show
graph1 = levelplot(t(volcano), col.regions = terrain.colors(100), xlab = &quot;&quot;, ylab = &quot;&quot;)

# Example image to show (GIFs can also be used)
img1 = &quot;https://www.r-project.org/logo/Rlogo.png&quot;
# img1 = &quot;https://upload.wikimedia.org/wikipedia/commons/d/d6/MeanMonthlyP.gif&quot;</code></pre>
</div>
<div id="add-popup-graph-and-image-to-the-map" class="section level4">
<h4>Add popup graph and image to the map</h4>
<p>This code uses the <code>addPopupGraphs()</code> and <code>addPopupImages()</code> functions from the <code>leafpop</code> package. <code>addPopupGraphs()</code> expects a <code>list</code> of <code>lattice</code> or <code>ggplot2</code> objects, while <code>addPopupImages</code> expects a <code>vector</code> of file paths or web-URLs to image files. When using more than one graph or image, the number should be the same as the number of points for the popups to render correctly. You may also need to check that the order of the graphs or images matches that of the order of the points so that the correct popup appears on the correct point.</p>
<pre class="r"><code>l4 = l3 %&gt;%
  # Add red circle point with a popup graph on mouse click
  addCircles(
    data = uk_pts2[1],
    # group argument essential for linking to popup graph
    group = &quot;Circle point 1&quot;,
    # circle size
    radius = 10000,
    # circle stroke parameters
    weight = 1, color = &quot;black&quot;,
    # circle fill parameterse
    fillColor = &quot;red&quot;, fillOpacity = 0.8,
    # highlight options
    highlightOptions = highlightOptions(
      weight = 1, color = &quot;white&quot;, fillOpacity = 0.8
      )
    ) %&gt;% 
  # Add popup graph
  addPopupGraphs(
    graph = list(graph1), width = 200, height = 200,
    group = &quot;Circle point 1&quot;
    )%&gt;%
  # Add circle points with a popup image on mouse click
  addCircles(
    data = uk_pts2[2],
    # group argument essential for linking to popup graph
    group = &quot;Circle point 2&quot;,
    # circle size
    radius = 10000,
    # circle stroke parameters
    weight = 1, color = &quot;black&quot;,
    # circle fill parameterse
    fillColor = &quot;red&quot;, fillOpacity = 0.8,
    # highlight options
    highlightOptions = highlightOptions(
      weight = 1, color = &quot;white&quot;, fillOpacity = 0.8
      )
    ) %&gt;% 
  # Add popup image
  addPopupImages(
    image = img1, width = 100, height = 100,
    group = &quot;Circle point 2&quot;
    )
l4 </code></pre>
<div id="htmlwidget-5" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-5">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[54.00366,-2.547855],6,[]],"calls":[{"method":"addProviderTiles","args":["OpenStreetMap",null,"Open Street Map",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["Esri.WorldImagery",null,"ESRI World Imagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["Esri.OceanBasemap",null,"ESRI Ocean Basemap",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addLayersControl","args":[["Open Street Map","ESRI World Imagery","ESRI Ocean Basemap"],[],{"collapsed":false,"autoZIndex":true,"position":"topright"}]},{"method":"addMarkers","args":[[54.0822213590915,51.4350432439315,51.9348226725412,51.8905509754304,54.0908065111777,51.9520361437869,53.9736948927934,51.8323041092126,56.7861881096018,57.6445483649753,51.9172792791196,54.7668605167992,55.2435418518087,53.0797272943651,51.2827414215399,57.6148195170986,54.9170350175274,54.6358216176692,52.3030048180656,58.6344943072293,52.6200692826876,50.9922596124837,56.783366253141,52.0274996874921,51.0608322348177,51.132141634211,51.9011015282938,57.1648481899148,56.7256478247995,55.7556989116873,50.9133186390096,56.3895317287263,58.1356593534958,52.1263349958649,54.1797138477309,58.1174058233694,56.8312920234779,53.4284680295092,54.4188248335032,52.6917061387243,57.6629448783138,58.5810121531866,55.0778283184237,55.6541965341256,56.479057353835,52.5151374220652,57.8400512729566,57.0385037106853,51.8944827250834,52.8645062833447,54.7089761852633,57.5296021006356,53.7149684489867,51.3375688066497,50.7310070473573,57.9620495147011,57.989577430239,51.5429943572853,57.9831821368439,56.9083059095346,51.2567310865777,50.8705068231669,56.7777537394749,53.3010695373514,52.4454645930263,53.625275912673,52.3582538465184,52.4932433109579,56.7592960913905,55.2116076515274,56.2674466688329,52.1258901586594,52.5431880850765,58.2998991538662,60.4808974335756,57.0427650053984,51.9543282297121,54.0335957978457,55.8438966402224,52.990192008658,50.3915680686841,53.5710035861523,56.3199035065895,56.1017911132985,57.2231867229847,56.4209435046735,52.7803736355851,51.712042860798,51.6728749072439,55.7115161631774,52.0554256306723,52.5499719635619,56.8624220567372,50.5669013997214,55.1871341840416,57.1098548072591,54.5290432472357,51.6743594585018,55.1517786853086,52.9935435567256],[-1.9894079965932,-2.11824031797076,-1.97872491322795,0.370839586885456,-1.81125189564899,-1.55631916955789,-1.28423098025831,0.137206990658166,-5.31367343189574,-6.29787325010708,-5.1507611196808,-6.57163559166198,-3.63343807891849,-3.12684587344118,-2.67157688098449,-3.17936327731639,-1.44740717969852,-7.41503745190927,-3.1602133643946,-3.25885605724141,0.246969772295603,-1.15659894583586,-3.11457364928954,-2.5604345750611,0.686583147239439,-0.398655239563041,-3.00930519760512,-4.97319997695901,-3.4769734535397,-6.20438104134916,-3.08454318724869,-5.17543342027727,-5.08197568085686,-2.55542683230577,-6.12503549825757,-4.92337199667997,-3.83680957231225,-1.08926868098041,-0.782875921605945,1.69315107823404,-5.65668349797776,-3.22912990737948,-1.87268976463145,-3.96029454032994,-3.51770020908277,-1.89599938064237,-4.93619023982626,-3.38334904438214,0.265491542743991,-2.65384119198841,-1.84104823012111,-3.88146619851266,-2.36555728034307,-1.13340568082384,-3.92143345408892,-4.74640704660066,-3.95056916886458,-2.59686053053954,-5.14751251531649,-5.07755685549598,0.111558913253436,-0.901328783193447,-5.10157738921441,-4.14698239533752,1.60447307082795,-2.54321445679942,-1.21343974242626,-3.40464009803434,-3.20360798033433,-4.80990452240855,-3.25413153788811,-2.53680345711144,-3.30279842865473,-3.94978804351665,-1.32848300686272,-2.88353491504347,0.209801075944966,-2.21226192941611,-4.61124135812003,-0.637660375004079,-4.42608730226855,-0.237013783518152,-2.75641561633473,-3.898917466535,-5.3675881324814,-3.62616645354644,-1.25752640050122,-0.0263902404434635,-1.66443448175849,-4.05468146871678,-0.647618321801009,-1.85476360646388,-3.66912737120108,-4.81523820732998,-3.35692948899066,-2.21935880604813,-2.13714463196882,-3.78708188866237,-2.60504693716937,-3.10367962518592],{"iconUrl":{"data":"https://cdn-icons-png.flaticon.com/512/490/490091.png","index":0},"iconSize":[[20,20]]},null,"Tree icons",{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,["Label 1","Label 2","Label 3","Label 4","Label 5","Label 6","Label 7","Label 8","Label 9","Label 10","Label 11","Label 12","Label 13","Label 14","Label 15","Label 16","Label 17","Label 18","Label 19","Label 20","Label 21","Label 22","Label 23","Label 24","Label 25","Label 26","Label 27","Label 28","Label 29","Label 30","Label 31","Label 32","Label 33","Label 34","Label 35","Label 36","Label 37","Label 38","Label 39","Label 40","Label 41","Label 42","Label 43","Label 44","Label 45","Label 46","Label 47","Label 48","Label 49","Label 50","Label 51","Label 52","Label 53","Label 54","Label 55","Label 56","Label 57","Label 58","Label 59","Label 60","Label 61","Label 62","Label 63","Label 64","Label 65","Label 66","Label 67","Label 68","Label 69","Label 70","Label 71","Label 72","Label 73","Label 74","Label 75","Label 76","Label 77","Label 78","Label 79","Label 80","Label 81","Label 82","Label 83","Label 84","Label 85","Label 86","Label 87","Label 88","Label 89","Label 90","Label 91","Label 92","Label 93","Label 94","Label 95","Label 96","Label 97","Label 98","Label 99","Label 100"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"14px","textOnly":false,"style":{"font-weight":"bold","padding":"5px"},"className":"","sticky":true},null]},{"method":"addPolygons","args":[[[[{"lng":[-1.5,-0.9,-0.9,-1.5,-1.5],"lat":[52,52,52.2,52.2,52]}]]],null,"Polygon 1",{"interactive":true,"className":"","stroke":true,"color":"blue","weight":3,"opacity":0.5,"fill":true,"fillColor":"blue","fillOpacity":0.1,"smoothFactor":1,"noClip":false},"Polygon 1",null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"color":"white","weight":3,"fillColor":"blue","fillOpacity":0.1}]},{"method":"addCircles","args":[52.2927447386783,-1.9894079965932,10000,null,"Circle point 1",{"interactive":true,"className":"","stroke":true,"color":"black","weight":1,"opacity":0.5,"fill":true,"fillColor":"red","fillOpacity":0.8},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"color":"white","weight":1,"fillOpacity":0.8},null]},{"method":"imagePopup","args":[["file30b46d134f92.png"],"Circle point 1",[200],[200],["l"],["file30b46d134f92"],false,{"maxWidth":2000}]},{"method":"addCircles","args":[55.2113706942505,-1.97872491322795,10000,null,"Circle point 2",{"interactive":true,"className":"","stroke":true,"color":"black","weight":1,"opacity":0.5,"fill":true,"fillColor":"red","fillOpacity":0.8},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"color":"white","weight":1,"fillOpacity":0.8},null]},{"method":"imagePopup","args":[["https://www.r-project.org/logo/Rlogo.png"],"Circle point 2",[100],[100],["r"],["Rlogo"],false,{"maxWidth":2000}]}],"limits":{"lat":[50.3915680686841,60.4808974335756],"lng":[-7.41503745190927,1.69315107823404]}},"evals":[],"jsHooks":[]}</script>
<p><a href="#contents">Back to Contents</a></p>
<div id="5"/>
</div>
</div>
<div id="add-extra-customisation-and-widgets" class="section level3">
<h3>5. Add extra customisation and widgets</h3>
<pre class="r"><code>l5 = l4 %&gt;%
  # Reset map to default setting
  leaflet.extras::addResetMapButton() %&gt;% 
  # Add an inset minimap
  addMiniMap(
    position = &quot;topright&quot;,
    tiles = providers$Esri.WorldStreetMap,
    toggleDisplay = TRUE,
    minimized = FALSE
    ) %&gt;%
  # Add measurement tool
  addMeasure(
    position = &quot;topleft&quot;,
    primaryLengthUnit = &quot;meters&quot;,
    secondaryLengthUnit = &quot;kilometers&quot;,
    primaryAreaUnit = &quot;sqmeters&quot;
    ) %&gt;%
  # Add scalebar
  addScaleBar(
    position = &quot;bottomright&quot;,
    options = scaleBarOptions(imperial = FALSE)
    ) %&gt;% 
  # Add a User-Interface (UI) control to switch layers
  addLayersControl(
    position = &quot;topright&quot;,
    baseGroups = c(&quot;Open Street Map&quot;,&quot;ESRI World Imagery&quot;,&quot;ESRI Ocean Basemap&quot;),
    # Add an option in layer control to toggle polygon layer
    overlayGroups = c(&quot;Polygon 1&quot;,&quot;Circle point 1&quot;,&quot;Circle point 2&quot;),
    # Choose to permanently display or collapse layers control switch
    options = layersControlOptions(collapsed = TRUE)
    ) %&gt;% 
  # Only show tree icons at a defined zoom level
  groupOptions(&quot;Tree icons&quot;, zoomLevels = 8:20) </code></pre>
<div id="6"/>
</div>
<div id="final-map" class="section level3">
<h3>5. Final map</h3>
<div id="htmlwidget-6" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-6">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[54.00366,-2.547855],6,[]],"calls":[{"method":"addProviderTiles","args":["OpenStreetMap",null,"Open Street Map",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["Esri.WorldImagery",null,"ESRI World Imagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["Esri.OceanBasemap",null,"ESRI Ocean Basemap",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addLayersControl","args":[["Open Street Map","ESRI World Imagery","ESRI Ocean Basemap"],[],{"collapsed":false,"autoZIndex":true,"position":"topright"}]},{"method":"addMarkers","args":[[54.0822213590915,51.4350432439315,51.9348226725412,51.8905509754304,54.0908065111777,51.9520361437869,53.9736948927934,51.8323041092126,56.7861881096018,57.6445483649753,51.9172792791196,54.7668605167992,55.2435418518087,53.0797272943651,51.2827414215399,57.6148195170986,54.9170350175274,54.6358216176692,52.3030048180656,58.6344943072293,52.6200692826876,50.9922596124837,56.783366253141,52.0274996874921,51.0608322348177,51.132141634211,51.9011015282938,57.1648481899148,56.7256478247995,55.7556989116873,50.9133186390096,56.3895317287263,58.1356593534958,52.1263349958649,54.1797138477309,58.1174058233694,56.8312920234779,53.4284680295092,54.4188248335032,52.6917061387243,57.6629448783138,58.5810121531866,55.0778283184237,55.6541965341256,56.479057353835,52.5151374220652,57.8400512729566,57.0385037106853,51.8944827250834,52.8645062833447,54.7089761852633,57.5296021006356,53.7149684489867,51.3375688066497,50.7310070473573,57.9620495147011,57.989577430239,51.5429943572853,57.9831821368439,56.9083059095346,51.2567310865777,50.8705068231669,56.7777537394749,53.3010695373514,52.4454645930263,53.625275912673,52.3582538465184,52.4932433109579,56.7592960913905,55.2116076515274,56.2674466688329,52.1258901586594,52.5431880850765,58.2998991538662,60.4808974335756,57.0427650053984,51.9543282297121,54.0335957978457,55.8438966402224,52.990192008658,50.3915680686841,53.5710035861523,56.3199035065895,56.1017911132985,57.2231867229847,56.4209435046735,52.7803736355851,51.712042860798,51.6728749072439,55.7115161631774,52.0554256306723,52.5499719635619,56.8624220567372,50.5669013997214,55.1871341840416,57.1098548072591,54.5290432472357,51.6743594585018,55.1517786853086,52.9935435567256],[-1.9894079965932,-2.11824031797076,-1.97872491322795,0.370839586885456,-1.81125189564899,-1.55631916955789,-1.28423098025831,0.137206990658166,-5.31367343189574,-6.29787325010708,-5.1507611196808,-6.57163559166198,-3.63343807891849,-3.12684587344118,-2.67157688098449,-3.17936327731639,-1.44740717969852,-7.41503745190927,-3.1602133643946,-3.25885605724141,0.246969772295603,-1.15659894583586,-3.11457364928954,-2.5604345750611,0.686583147239439,-0.398655239563041,-3.00930519760512,-4.97319997695901,-3.4769734535397,-6.20438104134916,-3.08454318724869,-5.17543342027727,-5.08197568085686,-2.55542683230577,-6.12503549825757,-4.92337199667997,-3.83680957231225,-1.08926868098041,-0.782875921605945,1.69315107823404,-5.65668349797776,-3.22912990737948,-1.87268976463145,-3.96029454032994,-3.51770020908277,-1.89599938064237,-4.93619023982626,-3.38334904438214,0.265491542743991,-2.65384119198841,-1.84104823012111,-3.88146619851266,-2.36555728034307,-1.13340568082384,-3.92143345408892,-4.74640704660066,-3.95056916886458,-2.59686053053954,-5.14751251531649,-5.07755685549598,0.111558913253436,-0.901328783193447,-5.10157738921441,-4.14698239533752,1.60447307082795,-2.54321445679942,-1.21343974242626,-3.40464009803434,-3.20360798033433,-4.80990452240855,-3.25413153788811,-2.53680345711144,-3.30279842865473,-3.94978804351665,-1.32848300686272,-2.88353491504347,0.209801075944966,-2.21226192941611,-4.61124135812003,-0.637660375004079,-4.42608730226855,-0.237013783518152,-2.75641561633473,-3.898917466535,-5.3675881324814,-3.62616645354644,-1.25752640050122,-0.0263902404434635,-1.66443448175849,-4.05468146871678,-0.647618321801009,-1.85476360646388,-3.66912737120108,-4.81523820732998,-3.35692948899066,-2.21935880604813,-2.13714463196882,-3.78708188866237,-2.60504693716937,-3.10367962518592],{"iconUrl":{"data":"https://cdn-icons-png.flaticon.com/512/490/490091.png","index":0},"iconSize":[[20,20]]},null,"Tree icons",{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,["Label 1","Label 2","Label 3","Label 4","Label 5","Label 6","Label 7","Label 8","Label 9","Label 10","Label 11","Label 12","Label 13","Label 14","Label 15","Label 16","Label 17","Label 18","Label 19","Label 20","Label 21","Label 22","Label 23","Label 24","Label 25","Label 26","Label 27","Label 28","Label 29","Label 30","Label 31","Label 32","Label 33","Label 34","Label 35","Label 36","Label 37","Label 38","Label 39","Label 40","Label 41","Label 42","Label 43","Label 44","Label 45","Label 46","Label 47","Label 48","Label 49","Label 50","Label 51","Label 52","Label 53","Label 54","Label 55","Label 56","Label 57","Label 58","Label 59","Label 60","Label 61","Label 62","Label 63","Label 64","Label 65","Label 66","Label 67","Label 68","Label 69","Label 70","Label 71","Label 72","Label 73","Label 74","Label 75","Label 76","Label 77","Label 78","Label 79","Label 80","Label 81","Label 82","Label 83","Label 84","Label 85","Label 86","Label 87","Label 88","Label 89","Label 90","Label 91","Label 92","Label 93","Label 94","Label 95","Label 96","Label 97","Label 98","Label 99","Label 100"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"14px","textOnly":false,"style":{"font-weight":"bold","padding":"5px"},"className":"","sticky":true},null]},{"method":"addPolygons","args":[[[[{"lng":[-1.5,-0.9,-0.9,-1.5,-1.5],"lat":[52,52,52.2,52.2,52]}]]],null,"Polygon 1",{"interactive":true,"className":"","stroke":true,"color":"blue","weight":3,"opacity":0.5,"fill":true,"fillColor":"blue","fillOpacity":0.1,"smoothFactor":1,"noClip":false},"Polygon 1",null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"color":"white","weight":3,"fillColor":"blue","fillOpacity":0.1}]},{"method":"addCircles","args":[52.2927447386783,-1.9894079965932,10000,null,"Circle point 1",{"interactive":true,"className":"","stroke":true,"color":"black","weight":1,"opacity":0.5,"fill":true,"fillColor":"red","fillOpacity":0.8},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"color":"white","weight":1,"fillOpacity":0.8},null]},{"method":"imagePopup","args":[["file30b46d134f92.png"],"Circle point 1",[200],[200],["l"],["file30b46d134f92"],false,{"maxWidth":2000}]},{"method":"addCircles","args":[55.2113706942505,-1.97872491322795,10000,null,"Circle point 2",{"interactive":true,"className":"","stroke":true,"color":"black","weight":1,"opacity":0.5,"fill":true,"fillColor":"red","fillOpacity":0.8},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"color":"white","weight":1,"fillOpacity":0.8},null]},{"method":"imagePopup","args":[["https://www.r-project.org/logo/Rlogo.png"],"Circle point 2",[100],[100],["r"],["Rlogo"],false,{"maxWidth":2000}]},{"method":"addEasyButton","args":[{"icon":"ion-arrow-shrink","title":"Reset View","onClick":"function(btn, map){ map.setView(map._initialCenter, map._initialZoom); }","position":"topleft"}]},{"method":"addMiniMap","args":[null,"Esri.WorldStreetMap","topright",150,150,19,19,-5,false,false,false,true,false,false,{"color":"#ff7800","weight":1,"clickable":false},{"color":"#000000","weight":1,"clickable":false,"opacity":0,"fillOpacity":0},{"hideText":"Hide MiniMap","showText":"Show MiniMap"},[]]},{"method":"addMeasure","args":[{"position":"topleft","primaryLengthUnit":"meters","secondaryLengthUnit":"kilometers","primaryAreaUnit":"sqmeters","activeColor":"#ABE67E","completedColor":"#C8F2BE","popupOptions":{"className":"leaflet-measure-resultpopup","autoPanPadding":[10,10]},"captureZIndex":10000,"localization":"en","decPoint":".","thousandsSep":","}]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":false,"updateWhenIdle":true,"position":"bottomright"}]},{"method":"addLayersControl","args":[["Open Street Map","ESRI World Imagery","ESRI Ocean Basemap"],["Polygon 1","Circle point 1","Circle point 2"],{"collapsed":true,"autoZIndex":true,"position":"topright"}]},{"method":"setGroupOptions","args":["Tree icons",{"zoomLevels":[8,9,10,11,12,13,14,15,16,17,18,19,20]}]}],"limits":{"lat":[50.3915680686841,60.4808974335756],"lng":[-7.41503745190927,1.69315107823404]}},"evals":["calls.10.args.0.onClick"],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (function(el, x){ var map = this; map._initialCenter = map.getCenter(); map._initialZoom = map.getZoom();}).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
<p><a href="#contents">Back to Contents</a></p>
<div id="7"/>
</div>
<div id="further-resources-and-r-session-info" class="section level3">
<h3>6. Further resources and R session info</h3>
<p>Leaflet for R: <a href="https://rstudio.github.io/leaflet/">vignette</a><br />
Leaflet for R: <a href="https://github.com/rstudio/leaflet">GitHub page</a><br />
R package: <a href="https://bhaskarvk.github.io/leaflet.extras/reference/index.html">leaflet.extras</a><br />
R package: <a href="https://trafficonese.github.io/leaflet.extras2/">leaflet.extras2</a><br />
R package: <a href="https://github.com/r-spatial/leafpop">leafpop</a><br />
R package: <a href="https://github.com/r-spatial/leafem">leafem</a><br />
R package: <a href="https://github.com/r-spatial/leafgl">leafgl</a></p>
<style type="text/css">
.scroll-100 {
  max-height: 100px;
  overflow-y: auto;
  background-color: inherit;
}
</style>
<pre class="r"><code>sessionInfo()
## R version 4.1.1 (2021-08-10)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## Running under: Windows 10 x64 (build 19043)
## 
## Matrix products: default
## 
## locale:
## [1] LC_COLLATE=English_United Kingdom.1252 
## [2] LC_CTYPE=English_United Kingdom.1252   
## [3] LC_MONETARY=English_United Kingdom.1252
## [4] LC_NUMERIC=C                           
## [5] LC_TIME=English_United Kingdom.1252    
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] htmlwidgets_1.5.4    lattice_0.20-44      rnaturalearth_0.1.0 
##  [4] forcats_0.5.1        stringr_1.4.0        dplyr_1.0.7         
##  [7] purrr_0.3.4          readr_2.0.2          tidyr_1.1.4         
## [10] tibble_3.1.5         ggplot2_3.3.5        tidyverse_1.3.1     
## [13] sf_1.0-3             htmltools_0.5.2      leaflet.extras_1.0.0
## [16] leafpop_0.1.0        leaflet_2.0.4.1     
## 
## loaded via a namespace (and not attached):
##  [1] fs_1.5.0                lubridate_1.8.0         httr_1.4.2             
##  [4] tools_4.1.1             backports_1.2.1         bslib_0.3.1            
##  [7] utf8_1.2.2              R6_2.5.1                KernSmooth_2.23-20     
## [10] rgeos_0.5-8             DBI_1.1.1               colorspace_2.0-2       
## [13] withr_2.4.2             sp_1.4-5                tidyselect_1.1.1       
## [16] rnaturalearthdata_0.1.0 compiler_4.1.1          cli_3.0.1              
## [19] rvest_1.0.2             xml2_1.3.2              bookdown_0.24          
## [22] sass_0.4.0              scales_1.1.1            classInt_0.4-3         
## [25] proxy_0.4-26            systemfonts_1.0.3       digest_0.6.28          
## [28] rmarkdown_2.11          svglite_2.0.0           base64enc_0.1-3        
## [31] pkgconfig_2.0.3         dbplyr_2.1.1            fastmap_1.1.0          
## [34] highr_0.9               rlang_0.4.12            readxl_1.3.1           
## [37] rstudioapi_0.13         jquerylib_0.1.4         generics_0.1.0         
## [40] jsonlite_1.7.2          crosstalk_1.2.0         magrittr_2.0.1         
## [43] s2_1.0.7                Rcpp_1.0.7              munsell_0.5.0          
## [46] fansi_0.5.0             lifecycle_1.0.1         stringi_1.7.5          
## [49] yaml_2.2.1              grid_4.1.1              crayon_1.4.2           
## [52] haven_2.4.3             hms_1.1.1               knitr_1.36             
## [55] pillar_1.6.4            uuid_0.1-4              markdown_1.1           
## [58] wk_0.5.0                reprex_2.0.1            glue_1.4.2             
## [61] evaluate_0.14           blogdown_1.6            leaflet.providers_1.9.0
## [64] modelr_0.1.8            vctrs_0.3.8             tzdb_0.1.2             
## [67] cellranger_1.1.0        gtable_0.3.0            assertthat_0.2.1       
## [70] xfun_0.27               broom_0.7.9             e1071_1.7-9            
## [73] class_7.3-19            units_0.7-2             ellipsis_0.3.2         
## [76] brew_1.0-6</code></pre>
</div>
</div>
